{
  "summary": {
    "title": "Liquidation model",
    "owner": "Le Duc Pham",
    "description": "Create a threat model for the liquidation flow of the Spook protocol. A liquidation happens when the collateral value falls below a particular threshold as a percentage of the borrowed assets. E.g. lets assume the collateral requirement is 110%. If you borrow $100K and deposit 100 ETH as collateral (current value of approx $120K), the ETH needs to have at least a value of $110K. Once the value falls below $110K, the position gets liquidated (aka sold) and the user can keep the borrowed asset. In the process, a user would loose $10K."
  },
  "detail": {
    "contributors": [
      {
        "name": "ducphamle2"
      }
    ],
    "diagrams": [
      {
        "title": "Liquidation diagram",
        "thumbnail": "./public/content/images/thumbnail.stride.jpg",
        "diagramType": "STRIDE",
        "id": 0,
        "diagramJson": {
          "cells": [
            {
              "type": "tm.Actor",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 28,
                "y": 46
              },
              "angle": 0,
              "id": "6c84c39a-3c3f-429d-ae0a-1bde31ff0154",
              "z": 1,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Liquidity Provider A"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 324,
                "y": 221
              },
              "angle": 0,
              "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4",
              "z": 2,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Liquidate"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "6c84c39a-3c3f-429d-ae0a-1bde31ff0154"
              },
              "target": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "vertices": [
                {
                  "x": 176,
                  "y": 201
                }
              ],
              "id": "d4e54f8f-bb6f-42ee-85ba-e156133d2760",
              "labels": [
                {
                  "position": {
                    "distance": 0.5071108987472893,
                    "offset": 6.876206245809404
                  },
                  "attrs": {
                    "text": {
                      "text": "1. Borrow Id",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 3,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 546,
                "y": 387
              },
              "angle": 0,
              "id": "82e77012-b97f-4d08-af08-6a1d62dcca82",
              "z": 4,
              "hasOpenThreats": false,
              "description": "",
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Compares Y\nwith threshold"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Actor",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 837,
                "y": 465
              },
              "angle": 0,
              "id": "53a3c02a-7ce8-4319-9883-f96437eba344",
              "z": 5,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Oracle"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "53a3c02a-7ce8-4319-9883-f96437eba344"
              },
              "target": {
                "id": "82e77012-b97f-4d08-af08-6a1d62dcca82"
              },
              "vertices": [],
              "id": "d756d2ca-2287-4f46-ac86-c5ba623332a7",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "5.1 Price of C",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 6,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Store",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 838,
                "y": 236
              },
              "angle": 0,
              "id": "20a2a6f9-d91f-474b-92c3-2ed323cfd6b4",
              "z": 7,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Protocol Parameter\nStore"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "20a2a6f9-d91f-474b-92c3-2ed323cfd6b4"
              },
              "target": {
                "id": "82e77012-b97f-4d08-af08-6a1d62dcca82"
              },
              "vertices": [],
              "id": "8edea25c-220b-4d3f-9d99-4b63b01611c9",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "5.2 Liquidation\nThreshold",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 8,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Store",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 685,
                "y": 68
              },
              "angle": 0,
              "id": "921a7618-eb17-448c-a11a-9417b2d798f1",
              "z": 9,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Protocol Borrow Store"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "target": {
                "id": "82e77012-b97f-4d08-af08-6a1d62dcca82"
              },
              "vertices": [],
              "id": "d3cc63a1-df7f-45ef-a962-94681e330040",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "4. Y asset C",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 10,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "921a7618-eb17-448c-a11a-9417b2d798f1"
              },
              "target": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "vertices": [],
              "id": "f0a6e963-6c52-42a6-b708-f9731f6eb1f8",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "3. Y asset C",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 11,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "target": {
                "id": "921a7618-eb17-448c-a11a-9417b2d798f1"
              },
              "vertices": [
                {
                  "x": 578,
                  "y": 247
                }
              ],
              "id": "27d59fc6-9a77-4460-a781-3446112948ac",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "2. Borrow Id",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 12,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "82e77012-b97f-4d08-af08-6a1d62dcca82"
              },
              "target": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "vertices": [
                {
                  "x": 423,
                  "y": 404
                }
              ],
              "id": "097536e5-d17c-462a-a5a3-2244403662b7",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "6. Liquidatable",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 13,
              "hasOpenThreats": false,
              "description": "A boolean value showing that the collateral should be liquidated",
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Store",
              "size": {
                "width": 160,
                "height": 80
              },
              "position": {
                "x": 37,
                "y": 450
              },
              "angle": 0,
              "id": "fa850062-a250-4089-9b3f-9a9853f3cd2a",
              "z": 14,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Asset C Collateralization\nPool"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "fa850062-a250-4089-9b3f-9a9853f3cd2a"
              },
              "target": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "vertices": [
                {
                  "x": 262,
                  "y": 321
                }
              ],
              "id": "de12c167-df9d-4908-a047-5b1d06aa8931",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "7. Y asset C",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 15,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "target": {
                "id": "6c84c39a-3c3f-429d-ae0a-1bde31ff0154"
              },
              "vertices": [],
              "id": "4f3856c8-c001-4f40-a686-fd46777f70e2",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "9. Y Asset C",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 16,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "d8493505-fbb1-4d59-90e5-c9fa2ac828f4"
              },
              "target": {
                "id": "2eae7618-9b8a-4523-a886-5d3b8564997f"
              },
              "vertices": [],
              "id": "6622f48f-a431-43e0-b07e-4174e9afa2d8",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "8. Borrow Id",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 17,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Process",
              "size": {
                "width": 100,
                "height": 100
              },
              "position": {
                "x": 445,
                "y": 12
              },
              "angle": 0,
              "id": "2eae7618-9b8a-4523-a886-5d3b8564997f",
              "z": 18,
              "hasOpenThreats": false,
              "attrs": {
                ".element-shape": {
                  "class": "element-shape hasNoOpenThreats isInScope"
                },
                "text": {
                  "text": "Delete Borrow\nRecord"
                },
                ".element-text": {
                  "class": "element-text hasNoOpenThreats isInScope"
                }
              }
            },
            {
              "type": "tm.Flow",
              "size": {
                "width": 10,
                "height": 10
              },
              "smooth": true,
              "source": {
                "id": "2eae7618-9b8a-4523-a886-5d3b8564997f"
              },
              "target": {
                "id": "921a7618-eb17-448c-a11a-9417b2d798f1"
              },
              "vertices": [],
              "id": "37f5105f-4ddd-48ff-bb6f-3f08346967f8",
              "labels": [
                {
                  "position": 0.5,
                  "attrs": {
                    "text": {
                      "text": "8. Borrow Id",
                      "font-weight": "400",
                      "font-size": "small"
                    }
                  }
                }
              ],
              "z": 19,
              "hasOpenThreats": false,
              "attrs": {
                ".marker-target": {
                  "class": "marker-target hasNoOpenThreats isInScope"
                },
                ".connection": {
                  "class": "connection hasNoOpenThreats isInScope"
                }
              }
            }
          ]
        },
        "size": {
          "height": 590,
          "width": 1063
        }
      }
    ]
  }
}